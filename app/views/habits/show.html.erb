<h2 class="text-xl font-bold"><%= @habit.name %></h2>
<p class="text-gray-600 mb-2"><%= @habit.description %></p>

<div class="flex flex-wrap gap-2 text-sm mb-4">
  <span class="bg-green-100 text-green-700 px-2 py-1 rounded">Current Streak: <%= @habit.current_streak %></span>
  <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded">Longest: <%= @habit.longest_streak %></span>
  <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded">Consistency: <%= @habit.consistency_percentage %>%</span>
</div>

<h3 class="text-lg font-semibold mt-4">Check-in Calendar</h3>
<div class="grid grid-cols-7 gap-2 mt-2">
  <% start_date = @habit.created_at.to_date %>
  <% today = Date.today %>
  <% (start_date..today).each do |date| %>
    <% checked_in = @habit.habit_checkins.exists?(date: date) %>
    <%= form_with url: habit_habit_checkins_path(@habit), method: :post, data: { turbo_frame: "_top" } do %>
      <%= hidden_field_tag :date, date %>
      <button class="text-xs md:text-sm px-1 py-1 w-full rounded
        <%= checked_in ? 'bg-green-500 text-white' : 'bg-gray-300 text-gray-700' %>">
        <%= date.strftime("%d") %>
      </button>
    <% end %>
  <% end %>
</div>
